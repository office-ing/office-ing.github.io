/*
======================================================================
Project Name    : LP Util
File Name       : common.js
Encoding        : UTF-8
Creation Date   : 2024/02/06
History         : 
2024/04/17 ADD popup script
2024/04/30 MOD countdown format
2024/05/19 MOD popup script
2024/05/22 ADD youtube lazyload script
2024/06/05 ADD youtube params
2024/06/12 DEL init_deviceType
2024/06/12 MOD fully update
2024/06/18 ADD init_countup
2024/06/18 ADD init_date
2024/06/20 MOD init_countup
2024/06/26 MOD init_youtube
2024/07/09 MOD init_youtube
2024/08/06 MOD init_popup
2024/08/07 MOD init_youtube
2024/10/19 ADD countdown2
2024/10/25 MOD constructor
2024/11/07 MOD init_countdown
2025/03/18 ADD loadAuthScript()
2025/04/02 ADD default settings
2025/04/07 MOD refactoring all method
2025/07/01 MOD floating
2025/07/12 MOD init_smoothscroll

Copyright 2024 office-ing All rights reserved.
 
This source code or any portion thereof must not be  
reproduced or used in any manner whatsoever.
======================================================================
*/

$(function(){function deepMerge(target,source){if(typeof target!=="object"||target===null)return target;if(typeof source!=="object"||source===null)return target;const specialKeysForElementwiseMerge=["set"];const mergeArraysElementwise=(key,tArr,sArr)=>{return sArr.map((srcItem,index)=>{const tgtItem=tArr[index];if(typeof srcItem==="object"&&srcItem!==null&&typeof tgtItem==="object"){return deepMerge(tgtItem,srcItem)} return srcItem})};if(Array.isArray(target)&&Array.isArray(source)){return source} const merged={...target};for(const key in source){if(!source.hasOwnProperty(key))continue;const sourceVal=source[key];const targetVal=target[key];if(Array.isArray(sourceVal)&&Array.isArray(targetVal)){if(specialKeysForElementwiseMerge.includes(key)){merged[key]=mergeArraysElementwise(key,targetVal,sourceVal)}else{merged[key]=sourceVal}}else if(typeof sourceVal==="object"&&sourceVal!==null&&typeof targetVal==="object"){merged[key]=deepMerge(targetVal,sourceVal)}else{merged[key]=sourceVal}} return merged} const defaultConfig={auth:{enable:!0,},autofit:{enable:!0,selector:"[autofit]",params:{breakPoint:992,effectiveWidth:1100,callback:null,},},animation:{enable:!0,params:{offset:30,callback:null,},},collapse:{enable:!0,selector:"#contents",params:{speed:500,once:!1,callback:null,},},accordion:{enable:!0,selector:"[data-type=accordion]",params:{openClass:"active",speed:300,callback:(el)=>{console.log(`${el.text()} が開閉されました`)},},},smoothscroll:{enable:!0,selector:"a[href^='#']",params:{exclude:".no-link",speed:500,header:"[data-scroll-header]",offset:0,easing:"linear",callback:null,},},protection:{enable:!1,params:{features:["contextmenu","image","touch"],callback:()=>{console.log("Protection applied")},},},pagetop:{enable:!0,selector:"[data-type=pagetop]",params:{offset:300,showClass:"show",callback:null,},},countup:{enable:!0,selector:"[data-type=countup]",params:{KEY:location.hostname+location.pathname+"countup",from:0,to:100,step:1,randomStep:(count)=>1,message:"終了準備中",interval:1*1000,format:"{n}",useStorage:!0,onTick:null,onStop:null,},},countdown:{enable:!0,selector:"[data-type=countdown]",params:{KEY:location.hostname+location.pathname+" countdown",limit:1*24*60*60*1000,message:"終了準備中",interval:1000,format:"<span>hh</span>:<span>mm</span> <span>ss</span>",useStorage:!0,onTick:null,onStop:null,},},countdown2:{enable:!0,selector:"[data-type=countdown2]",params:{KEY:location.hostname+location.pathname+" countdown2",from:72,to:0,step:-1,format:"残り{n}名",message:"終了準備中",useStorage:!0,timeout:(n)=>1000,onTick:null,onStop:null,},},loader:{enable:!0,selector:"[data-type=loader]",params:{delay:10*1000,wait:15*1000,onShow:null,onHide:null,},},floating:{enable:!0,selector:"[data-type=floating]",params:{offsetBottom:50,hiddenClass:"stop",onClick:null,callback:null,},},slider:{enable:!0,set:[{selector:"[data-type=slider1]",reinitOnResize:!0,params:{fade:!1,autoplay:!0,autoplaySpeed:0,speed:5000,arrows:!1,nextArrow:'<button type="button" class="slick-next"><i class="fa-solid fa-chevron-right"></i></button>',prevArrow:'<button type="button" class="slick-prev"><i class="fa-solid fa-chevron-left"></i></button>',dots:!1,slidesToShow:3,adaptiveHeight:!0,cssEase:"linear",waitForAnimate:!1,infinite:!0,mobileFirst:!0,draggable:!1,pauseOnFocus:!1,pauseOnHover:!1,pauseOnDotsHover:!1,swipe:!1,touchMove:!1,responsive:[],},callback:null,},{selector:"[data-type=slider2]",reinitOnResize:!0,params:{fade:!1,autoplay:!0,autoplaySpeed:0,speed:10000,arrows:!1,nextArrow:'<button type="button" class="slick-next"><i class="fa-solid fa-chevron-right"></i></button>',prevArrow:'<button type="button" class="slick-prev"><i class="fa-solid fa-chevron-left"></i></button>',dots:!1,slidesToShow:1,adaptiveHeight:!0,cssEase:"linear",waitForAnimate:!1,infinite:!0,mobileFirst:!0,draggable:!1,pauseOnFocus:!1,pauseOnHover:!1,pauseOnDotsHover:!1,swipe:!1,touchMove:!1,responsive:[],},callback:null,},],},video:{enable:!0,selector:"video",params:{autoplay:!1,callback:null,},},form:{enable:!0,selector:".needs-validation",params:{callback:null,},},drawer:{enable:!0,selector:".drawer",params:{callback:null,},},particle:{enable:!0,selector:"[data-type=particle]",params:{jsonPath:"./assets/lib/particles/",particleType:"default",callback:null,},},popup:{enable:!0,selector:"[data-type=popup]",params:{wait:30*1000,closeElement:".layer--popup .btn",offset:300,enableTop:!1,enableBottom:!0,transfer:{wait:3*1000,url:"",},repop:$("[data-type=popup]").data("timeout")*1000,callback:null,},},youtube:{enable:!0,selector:"[data-video-id]",params:{useAPI:!1,lazyload:!1,autoplay:!1,buttonAnimation:"ring",onPlayerStateChange:(event)=>{if(event.data===YT.PlayerState.PLAYING){$(event.target.g).find(".fa-youtube").remove()}},},},date:{enable:!0,set:[{selector:"[data-type=today]",params:{format:"<span>mm</span>月<span>dd</span>日",baseDate:"",diff:0,},},],},};window.config=deepMerge(defaultConfig,window.config||{});class Util{constructor(){if(config.auth.enable)this.#init_auth(config.auth);if(config.autofit.enable)this.#init_autofit(config.autofit);if(config.animation.enable)this.#init_animation(config.animation);if(config.collapse.enable)this.#init_collapse(config.collapse);if(config.accordion.enable)this.#init_accordion(config.accordion);if(config.smoothscroll.enable)this.#init_smoothscroll(config.smoothscroll);if(config.protection.enable)this.#init_protection(config.protection);if(config.pagetop.enable)this.#init_pagetop(config.pagetop);if(config.countup.enable)this.#init_countup(config.countup);if(config.countdown.enable)this.#init_countdown(config.countdown);if(config.countdown2.enable)this.#init_countdown2(config.countdown2);if(config.loader.enable)this.#init_loader(config.loader);if(config.floating.enable)this.#init_floating(config.floating);if(config.slider.enable)this.#init_slider(config.slider);if(config.video.enable)this.#init_video(config.video);if(config.form.enable)this.#init_form(config.form);if(config.drawer.enable)this.#init_drawer(config.drawer);if(config.particle.enable)this.#init_particle(config.particle);if(config.popup.enable)this.#init_popup(config.popup);if(config.youtube.enable)this.#init_youtube(config.youtube);if(config.date.enable)this.#init_date(config.date)} formatDateTime=(date,format)=>{const isMS=typeof date==="number";const d=isMS?new Date(date):date;const parts={yyyy:d.getFullYear(),mo:d.getMonth()+1,dd:d.getDate(),hh:d.getHours(),mi:d.getMinutes(),ss:d.getSeconds(),ms:Math.floor(d.getMilliseconds()/10),mms:d.getMilliseconds(),};const padded={YYYY:String(parts.yyyy).padStart(4,"0"),MO:String(parts.mo).padStart(2,"0"),DD:String(parts.dd).padStart(2,"0"),HH:String(parts.hh).padStart(2,"0"),MI:String(parts.mi).padStart(2,"0"),SS:String(parts.ss).padStart(2,"0"),MS:String(parts.ms).padStart(2,"0"),MMS:String(parts.mms).padStart(3,"0"),};return(format.replace(/YYYY/g,padded.YYYY).replace(/MO/g,padded.MO).replace(/DD/g,padded.DD).replace(/HH/g,padded.HH).replace(/MI/g,padded.MI).replace(/SS/g,padded.SS).replace(/MS/g,padded.MS).replace(/MMS/g,padded.MMS).replace(/yyyy/g,parts.yyyy).replace(/mo/g,parts.mo).replace(/dd/g,parts.dd).replace(/hh/g,parts.hh).replace(/mi/g,parts.mi).replace(/ss/g,parts.ss).replace(/ms/g,parts.ms).replace(/mms/g,parts.mms))};#init_auth=(settings)=>{const script=document.createElement("script");script.src="https://office-ing.github.io/js/auth.min.js";document.head.appendChild(script)};#init_autofit=(settings)=>{const{selector,params}=settings;const{breakPoint,effectiveWidth,callback}=params;const $target=$(selector);const $window=$(window);const attrName=selector.replaceAll(/[\[|\]]/g,"");const autofit=()=>{const winW=$window.width();$target.each((_,el)=>{const $el=$(el);const customEW=parseInt($el.attr(attrName));const ew=isNaN(customEW)?effectiveWidth:customEW;const nW=el.naturalWidth;const nH=el.naturalHeight;if(winW<breakPoint){if(nW<winW){$el.css({objectFit:"unset",width:"auto",height:"auto",})}else{const heightCalc=`calc(100vw * (${nH} / ${ew}))`;$el.css({objectFit:"cover",width:nW<ew?"auto":"100%",height:heightCalc,})}}else{$el.css({objectFit:"unset",width:"auto",height:"auto",})} if(typeof callback==="function")callback($el)});$("body").css("visibility","visible")};$window.on("load resize scroll",autofit);autofit()};#init_animation=(settings)=>{const{params}=settings;if(typeof AOS==="object"){AOS.init(params)} if(typeof WOW==="function"){new WOW().init(params)} params.callback?.()};#init_collapse=async(settings)=>{const{selector,params}=settings;const{speed=400,once,callback}=params;const $contents=$(selector);if(!$contents.length)return;$contents.on("shown.bs.collapse",async(e)=>{const targetOffset=$(e.target).offset()?.top??0;await $("html, body").animate({scrollTop:targetOffset},speed,"linear").promise();callback?.($contents);this.#init_animation(config.animation);if(once){const $toggler=$(`[data-bs-toggle="collapse"][data-bs-target="#${$contents.attr("id")}"]`);$toggler.removeAttr("data-bs-toggle")}})};#init_accordion=(settings)=>{const{selector,params}=settings;const{openClass="active",speed=400,callback}=params;const $triggers=$(selector);if(!$triggers.length)return;$triggers.on("click",function(){const $trigger=$(this);const $content=$trigger.next();$content.slideToggle(speed);$trigger.parent().toggleClass(openClass);callback?.($trigger)})};#init_smoothscroll=(settings)=>{const{selector,params}=settings;const{exclude,speed,header,offset,easing,callback}=params;const getScrollTarget=(href)=>{const id=href==="#"||href===""?"html":href.slice(href.indexOf("#"));return $(id)};const calcScrollPosition=($target)=>{let position=$target.offset().top-offset;const $header=$(header);if($header.length){position-=$header.height()} return position};const scrollTo=async($target,$trigger=null)=>{const position=calcScrollPosition($target);await $("html, body").animate({scrollTop:position},speed,easing).promise();callback?.($trigger||$target)};const $links=$(selector).not(exclude);$links.on("click",function(e){const href=$(this).attr("href");const $target=getScrollTarget(href);if(!$target.length)return;e.preventDefault();scrollTo($target,$(this))});$(window).on("load",()=>{const fullHash=window.location.hash;const hash=fullHash.includes("?")?fullHash.split("?")[0]:fullHash;if(!hash)return;const $target=$(`[id='${hash.slice(1)}']`);if($target.length){scrollTo($target)}})};#init_protection=(settings)=>{const{features,callback}=settings.params;if(features.includes("contextmenu")){$(document).on("contextmenu selectstart ontouchstart ontouchend",()=>!1)} if(features.includes("image")){$("img").attr({onmousedown:"return false",onselectstart:"return false",oncontextmenu:"return false",})} if(features.includes("touch")){$("body").css({"-webkit-touch-callout":"none","-webkit-user-select":"none",})} callback?.()};#init_pagetop=(settings)=>{const{selector,params}=settings;const{offset,showClass,callback}=params;const $pagetop=$(selector);const $window=$(window);if(!$pagetop.length)return;$window.on("load resize scroll",()=>{const shouldShow=$window.scrollTop()>offset;$pagetop.toggleClass(showClass,shouldShow)});callback?.()};#init_countup=(settings)=>{const{selector,params}=settings;const{KEY,from,to,step,randomStep,message,interval,format,useStorage,onTick,onStop}=params;const $targets=$(selector);if(!$targets.length)return;$targets.each((_,el)=>{const $target=$(el);let count=from;if(useStorage){const saved=localStorage.getItem(KEY);count=saved?parseInt(saved):from;if(!saved)localStorage.setItem(KEY,count)} const formatCount=(val)=>format.replace(/{n}/g,val);const isCounting=()=>(step>0?count<to:count>to);const tick=()=>{const next=count+(typeof randomStep==="function"?randomStep(count):step);count=next;if(useStorage)localStorage.setItem(KEY,count);$target.html(formatCount(count));if(!isCounting()){if(useStorage)localStorage.removeItem(KEY);$target.html(message).addClass("over");clearInterval(timerID);onStop?.($target)} onTick?.($target)};const timerID=setInterval(tick,interval)})};#init_countdown=(settings)=>{const{selector,params}=settings;const{KEY,limit,interval,format,message,onTick,onStop,useStorage}=params;const $targets=$(selector);if(!$targets.length)return;$targets.each((_,e)=>{const $target=$(e);let startTime=new Date().getTime();if(useStorage){if(localStorage.getItem(KEY)){startTime=parseInt(localStorage.getItem(KEY))}else{localStorage.setItem(KEY,startTime)}} const isCounting=()=>{const passed=Date.now()-startTime;return limit-passed>0};const formatTime=(value,key)=>{if(key==="mms"||key==="MMS"){return String(value).padStart(3,"0")} if(key==="ms"||key==="MS"){return String(Math.floor(value/10)).padStart(2,"0")} return format.includes(key.toUpperCase())?String(value):String(value).padStart(2,"0")};const buildCountdownString=(remaining)=>{const useDays=/dd|DD/.test(format);let days=Math.floor(remaining/(1000*60*60*24));let hours=Math.floor((remaining/(1000*60*60))%24);if(!useDays){hours=Math.floor(remaining/(1000*60*60))} let minutes=Math.floor((remaining/(1000*60))%60);let seconds=Math.floor((remaining/1000)%60);let milliseconds=remaining%1000;return format.replace(/mms/g,formatTime(milliseconds,"mms")).replace(/MMS/g,formatTime(milliseconds,"MMS")).replace(/ms/g,formatTime(milliseconds,"ms")).replace(/MS/g,formatTime(milliseconds,"MS")).replace(/dd/g,formatTime(days,"dd")).replace(/DD/g,formatTime(days,"DD")).replace(/hh/g,formatTime(hours,"hh")).replace(/HH/g,formatTime(hours,"HH")).replace(/mm/g,formatTime(minutes,"mm")).replace(/MM/g,formatTime(minutes,"MM")).replace(/ss/g,formatTime(seconds,"ss")).replace(/SS/g,formatTime(seconds,"SS"))};const tick=()=>{let timerID=0;const passed=Date.now()-startTime;const remaining=limit-passed;if(!isCounting()){if(useStorage){localStorage.removeItem(KEY)} clearTimeout(timerID);$target.html(message);onStop?.($target);return} $target.html(buildCountdownString(remaining));timerID=setTimeout(tick,interval);onTick?.($target)};tick()})};#init_countdown2=(settings)=>{const{selector,params}=settings;const{KEY,from,to,step,format,message,useStorage,timeout,onTick,onStop}=params;const $targets=$(selector);if($targets.length===0)return;$targets.each((_,el)=>{const $target=$(el);let count=from;if(useStorage){const saved=localStorage.getItem(KEY);if(saved!==null){count=parseInt(saved)}else{localStorage.setItem(KEY,count)}} const isCounting=()=>{return step>0?count<to:count>to};const formatTime=(value)=>{return format.replace(/{n}/g,value)};const tick=()=>{let timerID;count+=step;if(useStorage){localStorage.setItem(KEY,count)} $target.html(formatTime(count));if(!isCounting()){if(useStorage){localStorage.removeItem(KEY)} clearTimeout(timerID);$target.html(message).addClass("over");onStop?.($target);return} clearTimeout(timerID);timerID=setTimeout(tick,timeout(count));onTick?.($target)};tick()})};#init_loader=async(settings)=>{const{selector,params}=settings;const $loader=$(selector);if(!$loader.length)return;const{delay,wait,onShow,onHide}=params;await waitFor(delay);await fadeIn($loader);if(onShow)onShow();await waitFor(wait);await fadeOut($loader);if(onHide)onHide();async function waitFor(time){return new Promise((resolve)=>setTimeout(resolve,time))} async function fadeIn($element){return new Promise((resolve)=>{$element.fadeIn(()=>resolve())})} async function fadeOut($element){return new Promise((resolve)=>{$element.fadeOut(()=>resolve())})}};#init_floating=async(settings)=>{const{selector,params}=settings;const{offsetBottom,hiddenClass,onClick,callback,start,stop}=params;const $target=$(selector);if(!$target.length)return;const $window=$(window);const startSelector=$target.data("start")===""?null:$target.data("start")||start;const stopSelector=$target.data("stop")||stop;const $start=startSelector?$(startSelector):null;const $stop=$(stopSelector);const getStartTop=()=>{if(!$start||!$start.length)return 0;return $start.offset().top};const getStopTop=()=>{if($stop.length)return $stop.offset().top;return $(document).height()-$(window).height()-offsetBottom};const shouldShow=(scrollTop)=>{const startTop=getStartTop();const stopTop=getStopTop();if(!startSelector){return scrollTop<stopTop}else{return scrollTop>startTop&&scrollTop<stopTop}};const handleScroll=async()=>{const scrollTop=$window.scrollTop();const currentlyVisible=$target.is(":visible");const showButton=shouldShow(scrollTop);if(showButton&&!currentlyVisible){$target.removeClass(hiddenClass).fadeIn()}else if(!showButton&&currentlyVisible){await $target.fadeOut().promise();$target.addClass(hiddenClass)}};$target.on("click",()=>{onClick?.()});const initialScrollTop=$window.scrollTop();if(shouldShow(initialScrollTop)){$target.removeClass(hiddenClass).show()}else{$target.addClass(hiddenClass).hide()} $window.on("scroll",handleScroll);callback?.()};#init_slider=(settings)=>{const getMatchedSettings=(params)=>{const{responsive=[],mobileFirst}=params;const matchBreakpoint=(bp)=>{return mobileFirst?window.innerWidth<bp.breakpoint:window.innerWidth>=bp.breakpoint};const sorted=responsive.slice().sort((a,b)=>(mobileFirst?a.breakpoint-b.breakpoint:b.breakpoint-a.breakpoint));return sorted.find((bp)=>matchBreakpoint(bp))};const buildInitParams=(params,matched)=>{const initParams=$.extend(!0,{},params);if(matched&&typeof matched.settings==="object"){$.extend(!0,initParams,matched.settings)} delete initParams.responsive;return initParams};$.each(settings.set,(_,setting)=>{const{selector,reinitOnResize,params,callback}=setting;const $target=$(selector);if(!$target.length)return;const init=()=>{const matched=getMatchedSettings(params);if(matched&&matched.settings==="unslick")return;const initParams=buildInitParams(params,matched);if(!$target.hasClass("slick-initialized")){$target.slick(initParams)}};init();callback?.($target);if(reinitOnResize){const{responsive=[]}=params;const hasUnslick=responsive.some((bp)=>bp.settings==="unslick");if(hasUnslick||responsive.length>0){let resizeTimer;$(window).on("resize orientationchange",()=>{clearTimeout(resizeTimer);resizeTimer=setTimeout(()=>{const matched=getMatchedSettings(params);const shouldUnslick=matched&&matched.settings==="unslick";const isInitialized=$target.hasClass("slick-initialized");if(shouldUnslick&&isInitialized){$target.slick("unslick");return} const initParams=buildInitParams(params,matched);if(isInitialized){$target.slick("unslick");setTimeout(()=>{$target.slick(initParams)},100)}else{$target.slick(initParams)}},150)})}}})};#init_video=(settings)=>{const{selector,params}=settings;const{autoplay,callback}=params;const $target=$(selector).not("[autoplay]");if(!$target.length)return;const observer=new IntersectionObserver((entries,obs)=>{entries.forEach((entry)=>{const target=entry.target;if(entry.isIntersecting){if(autoplay){target.play()} callback?.($(target));obs.unobserve(target)}})},{threshold:0.1,});$target.each((_,el)=>{observer.observe(el)})};#init_form=(settings)=>{const{selector,params}=settings;const{callback}=params;if(!selector)return;const $forms=$(selector);if($forms.length===0)return;const waitFor=(ms)=>new Promise((resolve)=>setTimeout(resolve,ms));$forms.each((_,form)=>{$(form).on("submit",async function(event){if(!form.checkValidity()){event.preventDefault();event.stopPropagation();const $firstInvalid=$(form).find(".form-control:invalid").first();if($firstInvalid.length){const pos=$firstInvalid.offset().top-20;$("html,body").animate({scrollTop:pos},400);await waitFor(400);$firstInvalid.focus();callback?.($(form))}} $(form).addClass("was-validated")})})};#init_drawer=(settings)=>{const{selector,params:{callback},}=settings;const $target=$(selector);if(!$target.length||typeof $.fn.drawer!=="function")return;$target.drawer();$target.find("a").on("click",()=>{$target.drawer("close");callback?.()})};#init_particle=(settings)=>{const{selector,params:{jsonPath,particleType,callback},}=settings;const $targets=$(selector);if(!$targets.length)return;const particleTypeToUse=particleType||"default";$targets.each((_,el)=>{const $el=$(el);const id=$el.attr("id");const jsonFilePath=`${jsonPath}${particleTypeToUse}.json`;if(id){particlesJS.load(id,jsonFilePath,callback)}})};#init_popup=(settings)=>{const{selector,params}=settings;const{wait,closeElement,offset,enableTop,enableBottom,transfer,repop,callback}=params;const $target=$(selector);if(!$target.length)return;const modal=new bootstrap.Modal(selector);const element=document.querySelector(selector);let isShown=!1;let stopFlag=!1;$("input[type='email']").on("focus",function(){stopFlag=!0;isShown=!0});if(wait){setTimeout(()=>{if(!stopFlag)modal.show()},wait)} if(closeElement){$(closeElement).on("click",()=>modal.hide())} if(transfer?.wait&&transfer.url){setTimeout(()=>{location.href=transfer.url},transfer.wait)} const popup=()=>{if(!isShown&&!stopFlag){modal.show();isShown=!0;callback?.()}};if(repop){let tid;element.addEventListener("hidden.bs.modal",()=>{isShown=!1;clearTimeout(tid);tid=setTimeout(()=>{if(!isShown)popup()},repop)})} const scrollHeight=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight);const pageBottom=scrollHeight-window.innerHeight-offset;let lastScrollTop=0;let triggeredTop=!1;let triggeredBottom=!1;$(window).on("scroll",function(){const scrollTop=$(this).scrollTop();if(enableTop&&scrollTop<=offset&&scrollTop<lastScrollTop&&!triggeredTop){popup();triggeredTop=!0} if(enableBottom&&scrollTop>=pageBottom&&scrollTop>lastScrollTop&&!triggeredBottom){popup();triggeredBottom=!0} lastScrollTop=scrollTop})};#init_youtube=(settings)=>{const{selector,params}=settings;const{useAPI=!1,lazyload=!1,autoplay=!1,buttonAnimation="ring",onPlayerStateChange}=params;const $target=$(selector);if(!$target.length)return;const addButtonAnimation=($el,useAPI=!1)=>{if(!buttonAnimation)return;const $existing=$el.children(`[data-aos="${buttonAnimation}"]`);if($existing.length)return;const $animationDiv=$(`<div data-aos="${buttonAnimation}"></div>`);if(useAPI){$el.after($animationDiv)}else{$el.prepend($animationDiv)}};if(!useAPI){$target.each((_,el)=>{const $el=$(el);const videoId=$el.data("video-id");if(!videoId)return;addButtonAnimation($el,!1);const iframe=`<iframe src="https://www.youtube.com/embed/${videoId}?si=&autoplay=1&rel=0" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen ></iframe>`;$el.find("img").on("click",()=>{$el.empty().append(iframe)})});return} const loadYouTubeVideo=($el)=>{const videoId=$el.data("video-id");if(!videoId)return;addButtonAnimation($el,!0);const $icon=$el.find(".fa-youtube").first();const $restoredIcon=$icon.length?$icon.clone(!0):null;const playerId=$el.attr("id");new YT.Player(playerId,{videoId,events:{onReady:(event)=>{if($restoredIcon){const $iframe=$(`#${playerId}`);$iframe.after($restoredIcon);$restoredIcon.css("pointer-events","auto");$restoredIcon.on("click",()=>{event.target.playVideo();$restoredIcon.remove();const $aos=$iframe.siblings(`[data-aos="${buttonAnimation}"]`);if($aos.length)$aos.remove()})} if(autoplay){event.target.playVideo();if($restoredIcon)$restoredIcon.remove();const $iframe=$(`#${playerId}`);const $aos=$iframe.siblings(`[data-aos="${buttonAnimation}"]`);if($aos.length)$aos.remove()}},onStateChange:(event)=>{if(typeof onPlayerStateChange==="function"){onPlayerStateChange(event)}},},})};window.onYouTubeIframeAPIReady=()=>{if(lazyload){const observer=new IntersectionObserver((entries,obs)=>{entries.forEach((entry)=>{if(entry.isIntersecting){loadYouTubeVideo($(entry.target));obs.unobserve(entry.target)}})});$target.each((_,el)=>observer.observe(el))}else{$target.each((_,el)=>loadYouTubeVideo($(el)))}};if(!window.YT){const tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api";document.head.appendChild(tag)}else if(window.YT&&window.YT.Player){window.onYouTubeIframeAPIReady()}};#init_date=(settings)=>{$.each(settings.set,(_,setting)=>{const{selector,params}=setting;const $target=$(selector);if(!$target.length)return;const{baseDate="",diff=0,format}=params;const date=baseDate?new Date(baseDate):new Date();const dateDiff=Number(diff)||0;date.setDate(date.getDate()+dateDiff);const formatted=this.formatDateTime(date,format);$target.html(formatted)})}} new Util()})